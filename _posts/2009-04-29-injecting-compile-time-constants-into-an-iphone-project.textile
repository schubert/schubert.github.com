---
layout: post
title: Injecting compile time constants into an iPhone project
---

h1. {{ page.title }}

p(meta). 29 Apr 2009 - New York

So you have your iPhone project and you need to dynamically set constant string referenced in your code from an environment variable (think: for localization and with stringWithFormat substitution). What to do?

Suppose you had an environment variable FOO_BAR with a value of “Hello”
* Project -> Edit Project Settings
* Add User Defined Setting
* User Defined value of “OTHER_CFLAGS” (in non-iphone projects this should already be defined)

Give it a value of:

<pre>
<code>
-DFOO_BAR=@\"$(FOO_BAR)\ World\"
</code>
</pre>

You can now do:

<pre>
<code>
NSString *titleText = NSLocalizedString(@"Title", nil);
titleText = [NSString stringWithFormat: titleText, FOO_BAR];
[title setText:titleText];
</code>
</pre>

And now title (in my case it is a UILabel) will have text of “Hello World”

Why the xcode project does not define an empty OTHER_CFLAGS build setting by default is beyond me but it is not cool.